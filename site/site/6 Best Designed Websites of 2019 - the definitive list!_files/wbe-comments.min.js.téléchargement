"use strict";var wbeCommentsLoad={nextPage:2,perPage:10,totalPages:!1,endpoint:"comments",$loadMore:jQuery("#load-more-comments-button-wrapper .wbe-btn"),$isLoading:jQuery("#load-more-comments-button-wrapper .wbe-loading"),init:function(){"undefined"!=typeof FlexiComments&&(this.getTotalComment()>this.getCurrentComments()&&this.$loadMore.show(),this.listener())},listener:function(){var a=this;this.$loadMore.on("click",function(){a.getMore()})},getTotalComment:function(){return parseInt(FlexiComments.commentsTotal,10)},getCurrentComments:function(){return parseInt(jQuery("#comments li").length,10)},toggleButtonLoading:function(){this.$loadMore.toggle(),this.$isLoading.toggle()},getMore:function(){var a=this;this.toggleButtonLoading();var b={post:FlexiComments.post_id,page:this.nextPage,per_page:this.perPage};jQuery.ajax({type:"GET",url:FlexiComments.api_url+this.endpoint,data:b}).done(function(b,c,d){a.nextPage=a.nextPage+1,a.render(b)}).fail(function(a){console.log("Error",a)}).always(function(b,c,d){a.totalPages=parseInt(d.getResponseHeader("X-WP-TotalPages"),10),a.nextPage-1>=a.totalPages&&a.$loadMore.remove(),a.toggleButtonLoading()})},getChildrenPart:function(a){var b=this;return a.children?'<ul class="children">'+a.children.map(function(a){return b.template(a)}).join("")+"</ul>":""},getReplyTextPart:function(a){var b="";return a.children&&(b='<div class="replies-counter">'+a.children.length+" "+FlexiComments.text.reply+"</div>"),b},template:function(a){return'<li class="comment" id="comment-'+a.id+'">\n            <div class="comment-header">\n                <div class="avatar-container">\n                    <img src="'+a.author_avatar+'" width="33" height="33" alt="'+a.author_name+'" class="avatar avatar-33 wp-user-avatar wp-user-avatar-33 alignnone photo">\n                </div>\n                <div class="comment-info">\n                    <cite class="comment-author">\n                        '+a.author_name+'\n                    </cite>\n                    <time datetime="'+a.date+'" class="time">\n                        '+a.humanTimeAgo+'\n                    </time>\n                </div>\n            </div>\n            <div class="comment-content">\n                '+a.content+'\n            </div>\n            <div class="comment-footer" id="comment-footer-'+a.id+'">\n                <div class="reply-link-container">\n                    <a rel="nofollow" class="comment-reply-link" href="#comment-'+a.id+'" onclick="return addComment.moveForm(\'comment-footer-'+a.id+"', "+a.id+", 'respond', "+FlexiComments.post_id+')" aria-label="'+FlexiComments.text.reply_to+" "+a.author_name+'">\n                        '+FlexiComments.text.reply+"\n                    </a>\n                </div>\n            </div>\n            "+this.getReplyTextPart(a)+"\n            "+this.getChildrenPart(a)+"\n        </li>"},render:function(a){var b=this,c=a.map(function(a){return b.template(a)}).join("");jQuery(".comment-list").append(c)}};jQuery(document).ready(function(){wbeCommentsLoad.init()});